<div class="fetch">
    <button id="vanilla-fetch-button">New quote</button>
    <p id="vanilla-fetch-delta">0ms</p>
    <div id="vanilla-fetch"></div>
</div>

<script>
    async function Vanilla_persistent_fetch() {
        async function getData() {
            return fetch("/api/fetch").then((response) => response.json());
        }

        const data = await getData();
        const parent = document.querySelector("#vanilla-fetch");
        const delta = document.querySelector("#vanilla-fetch-delta");

        function render() {
            const tick = new Date().getTime();
            const r = Math.random() * data.length;
            parent.innerHTML = data[Math.floor(r)];
            const tock = new Date().getTime();
            delta.innerHTML = tock - tick + "ms";
        }

        render();

        document
            .querySelector("#vanilla-fetch-button")
            .addEventListener("click", render);
    }

    Vanilla_persistent_fetch();
</script>
