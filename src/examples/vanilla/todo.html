<div
    class="todo-container"
    id="vanilla-todo-container"
>
    <p id="vanilla-todo-completed">Completed: 0</p>
    <div class="todo-header">
        <input
            type="text"
            id="vanilla-todo-input"
        />
        <button id="vanilla-todo-clear">Clear</button>
    </div>
    <ul
        class="todo-parent"
        id="vanilla-todo-parent"
    ></ul>
</div>

<script>
    const todoParent = document.querySelector("#vanilla-todo-parent");
    const todoCompleted = document.querySelector("#vanilla-todo-completed");

    let completedAmount = 0;

    function AddTodo(text, completed) {
        const todoItem = document.createElement("li");
        todoItem.classList.add("todo-item");

        const textElement = document.createElement("span");
        if (completed) {
            textElement.classList.add("todo-completed");
            completedAmount++;
            todoCompleted.innerHTML = `Completed: ${completedAmount}`;
        }
        textElement.innerHTML = text;

        const toggleButton = document.createElement("button");
        toggleButton.innerHTML = "Toggle";
        toggleButton.addEventListener("click", () => {
            textElement.classList.toggle("todo-completed");
            const isCompleted =
                textElement.classList.contains("todo-completed");
            completedAmount += isCompleted ? 1 : -1;
            todoCompleted.innerHTML = `Completed: ${completedAmount}`;
        });

        const deleteButton = document.createElement("button");
        deleteButton.innerHTML = "Delete";
        deleteButton.addEventListener("click", () => {
            todoItem.remove();
            const isCompleted =
                textElement.classList.contains("todo-completed");
            completedAmount += isCompleted ? -1 : 0;
            todoCompleted.innerHTML = `Completed: ${completedAmount}`;
        });

        todoItem.appendChild(textElement);
        todoItem.appendChild(toggleButton);
        todoItem.appendChild(deleteButton);

        todoParent.appendChild(todoItem);
    }

    const clearButton = document.querySelector("#vanilla-todo-clear");

    clearButton.addEventListener("click", () => {
        todoParent.innerHTML = "";
        renderTodos();
    });

    const input = document.querySelector("#vanilla-todo-input");

    input.addEventListener("keyup", (e) => {
        if (e.key !== "Enter") {
            return;
        }

        AddTodo(input.value, false);
        input.value = "";
    });

    AddTodo("Learn web dev", true);
    AddTodo("learn Vanilla JS", false);
</script>
